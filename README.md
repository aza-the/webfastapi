# Сервис для расчета рыночной стоимости жилой недвижимости Города Москвы

![webfastapi_workflow](https://github.com/aza-the/webfastapi/actions/workflows/docker-image.yml/badge.svg)
[![PEP8](https://img.shields.io/badge/code%20style-pep8-orange.svg)](https://www.python.org/dev/peps/pep-0008/)
[![Imports: isort](https://img.shields.io/badge/%20imports-isort-%231674b1?style=flat&labelColor=ef8336)](https://pycqa.github.io/isort/)

### Оглавление
1. [Описание](#описание)
2. [Документация](#документация)
    1. [Структура проекта](#структура-проекта)
    2. [Развертывание проекта](#развертывание-проекта)
3. [Системные требования](#системные-требования)


# Описание
Приветствую! Данный проект выполнен в рамках конкурса [Лидеры цифровой трансформации](https://leaders2022.innoagency.ru/). Была выбрана задача №6 "Сервис для расчета рыночной стоимости жилой недвижимости Города Москвы".

Проект основан на машинном обучении, при использовании мощной библиотеки для машинного обучения **tensorflow**, асинхронного веб-фреймворка **FastAPI**, базы с открытым исходным кодом **PostgreSQL**.

Проект доступен [по этой ссылке](https://flatsprice.ru). :smiley:

# Документация

### Структура проекта
```python
| webfastapi <-- Основная директория проекта
|
|   -  app  <-- Backend и Frontend
|       - config  <-- Основные настройки проекта (Данные для подключения к базе, порты и т.д.)
|       - db   <-- Файлы для работы с базой (Подключение, миграции и вспомогательные функции)
|       - router <-- Здесь хранятся эндпоинты (ручки, роутеры)
|       - schemas <-- Работа с сериализацией и валидацией данных
|       - static <-- Статика, JavaScript, данные для машинного обучения
|       - templates <-- Шаблоны для отрисовки страниц
|       - utils <-- Вспомогательные функции и машинное обучение
|
|   -  tests  <-- Тесты
|       - conftest.py <-- Конфигурационный файл для тестов фреймворка pytest
|       - utils.py <-- Вспомогательные функции для тестов
|
|   -  Dockerfile <-- Файл с инструкциями для сборки образа
|   -  docker-compose <-- Сборка образов в контейнер (Приложение и база)
|   -  Makefile <-- Инструмент для более удобной работы с командами
|   -  pyproject.toml <-- Зависимости
```

### Развертывание проекта
---

1. Зайдите в GitBash, при необходимости установите
2. При помощи команд 

Перейти в каталог:
```
cd "каталог"
```
Подняться на уровень вверх:
```
cd .. 
```
:exclamation: Перейдите в нужный каталог для клонирования репозитория :exclamation:

3. Клонирование репозитория:
```
git clone https://github.com/aza-the/webfastapi/
```
4. Перейти в каталог:
```
cd webfastapi
```
5. Заплонение данных:
Необходимо создать файл .env, необходимо прописать следующие константные секретные переменные, где * - обязательные:

```python
# DATABASE
*POSTGRES_PORT=5432
*POSTGRES_USER=user
*POSTGRES_PASSWORD=hackme
*POSTGRES_DB=db
*POSTGRES_HOST=database

# APP
APP_PORT=8080
```
6. Запуск проекта:
```
docker-compose up -d
```
7. Выполнить миграции:
```
docker-compose exec app bash

Далее ввести команды:
make revision && make alembic_upgrade
```

Готово! Можно заходить на сайт по ip адресу 127.0.0.1:**ВАШ_ПОРТ**, если порт не меняли, то можно и [сюда](http://127.0.0.1:8080/) :wink:

Если проект требуется остановить, нужно выполнить команду ```docker-compose stop```

### Системные требования
----

- Python 3.10.5
- Docker Desktop or Docker + docker-compose
- GitBash
- 4GB of Ram
